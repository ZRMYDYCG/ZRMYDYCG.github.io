{"title":"项目复盘报告【三】","uid":"b1f01d2176a1e62876bf64aa028afa7b","slug":"项目复盘报告【三】","date":"2023-10-03T09:23:50.000Z","updated":"2024-02-13T09:33:40.053Z","comments":true,"path":"api/articles/项目复盘报告【三】.json","keywords":null,"cover":"https://pic.imgdb.cn/item/65cb36a29f345e8d03b81368.jpg","content":"<h2 id=\"一、Toast-轻提示\"><a href=\"#一、Toast-轻提示\" class=\"headerlink\" title=\"一、Toast 轻提示\"></a>一、Toast 轻提示</h2><p><a href=\"%5Bhttps://vant-contrib.gitee.io/vant/v2/#/zh-CN/toast%5D(https://vant-contrib.gitee.io/vant/v2/#/zh-CN/toast)\">使用组件</a></p>\n<p>两种使用方式</p>\n<ol>\n<li>导入调用 ( <strong>组件内</strong> 或 <strong>非组件中均可</strong> )</li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #9569EC\">import</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span><span style=\"color: #CCCCCC\"> Toast </span><span style=\"color: #505153\">&#125;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">from</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;</span><span style=\"color: #DA67DA\">vant</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #505153\">;</span></span>\n<span class=\"line\"><span style=\"color: #9569EC\">Toast</span><span style=\"color: #505153\">(</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">提示内容</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #505153\">);</span></span></code></pre></div><ol start=\"2\">\n<li>通过this直接调用 ( **组件内 **)</li>\n</ol>\n<p>main.js 注册绑定到原型</p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #9569EC\">import</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span><span style=\"color: #CCCCCC\"> Toast </span><span style=\"color: #505153\">&#125;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">from</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;</span><span style=\"color: #DA67DA\">vant</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #505153\">;</span></span>\n<span class=\"line\"><span style=\"color: #61D0FF\">Vue</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">use</span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">Toast</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">$toast</span><span style=\"color: #505153\">(</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">提示内容</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #505153\">)</span></span></code></pre></div><h2 id=\"二、短信倒计时功能\"><a href=\"#二、短信倒计时功能\" class=\"headerlink\" title=\"二、短信倒计时功能\"></a>二、短信倒计时功能</h2><p><img src=\"https://pic.imgdb.cn/item/65caf1e19f345e8d03ef62b8.jpg\"></p>\n<p>(1) 倒计时基础效果</p>\n<ol>\n<li>准备 data 数据</li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #9569EC\">data</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">()</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    totalSecond</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">60</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #65666B; font-style: italic\">// 总秒数</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    second</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">60</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #65666B; font-style: italic\">// 倒计时的秒数</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    timer</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC; font-style: italic\">null</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #65666B; font-style: italic\">// 定时器 id</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span></span></code></pre></div><ol start=\"2\">\n<li>给按钮注册点击事件</li>\n</ol>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DA67DA\">&lt;</span><span style=\"color: #9569EC; font-style: italic\">button</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">@click</span><span style=\"color: #505153\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">getCode</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #DA67DA\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #65666B; font-style: italic\">&#123;&#123; second === totalSecond ? '获取验证码' : second + `秒后重新发送`&#125;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #DA67DA\">&lt;/</span><span style=\"color: #9569EC; font-style: italic\">button</span><span style=\"color: #DA67DA\">&gt;</span></span></code></pre></div><ol start=\"3\">\n<li>开启倒计时时</li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #CCCCCC\">async </span><span style=\"color: #9569EC\">getCode</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">()</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">if</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #DA67DA\">!</span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">timer </span><span style=\"color: #DA67DA\">&amp;&amp;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">second </span><span style=\"color: #9569EC\">===</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">totalSecond</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #65666B; font-style: italic\">// 开启倒计时</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">timer </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">setInterval</span><span style=\"color: #505153\">(()</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">=&gt;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">second</span><span style=\"color: #9569EC\">--</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      </span><span style=\"color: #9569EC\">if</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">second </span><span style=\"color: #9569EC\">&lt;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">1</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">        </span><span style=\"color: #9569EC\">clearInterval</span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">timer</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">        </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">timer </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC; font-style: italic\">null</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">        </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">second </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">totalSecond</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #505153\">&#125;</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">1000</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #65666B; font-style: italic\">// 发送请求，获取验证码</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">$toast</span><span style=\"color: #505153\">(</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">发送成功，请注意查收</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span></span></code></pre></div><ol start=\"4\">\n<li>离开页面销毁该定时器</li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #9569EC\">destroyed</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">()</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">clearInterval</span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">timer</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span></span></code></pre></div><p>(2) 验证码请求校验处理</p>\n<ol>\n<li>输入框 v-model 绑定变量</li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #9569EC\">data</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">()</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    mobile</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;&#39;</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #65666B; font-style: italic\">// 手机号</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    picCode</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;&#39;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #65666B; font-style: italic\">// 图形验证码</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span></span></code></pre></div><div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DA67DA\">&lt;</span><span style=\"color: #9569EC; font-style: italic\">input</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">v-model</span><span style=\"color: #505153\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">mobile</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">class</span><span style=\"color: #505153\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">inp</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">maxlength</span><span style=\"color: #505153\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">11</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">placeholder</span><span style=\"color: #505153\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">请输入手机号码</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">type</span><span style=\"color: #505153\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">text</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #DA67DA\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #DA67DA\">&lt;</span><span style=\"color: #9569EC; font-style: italic\">input</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">v-model</span><span style=\"color: #505153\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">picCode</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">class</span><span style=\"color: #505153\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">inp</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">maxlength</span><span style=\"color: #505153\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">5</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">placeholder</span><span style=\"color: #505153\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">请输入图形验证码</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">type</span><span style=\"color: #505153\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">text</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #DA67DA\">&gt;</span></span></code></pre></div><ol start=\"2\">\n<li>methods中封装校验方法</li>\n</ol>\n<p>校验输入框内容</p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #9569EC\">validFn</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">()</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">if</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #DA67DA\">!</span><span style=\"color: #505153\">/</span><span style=\"color: #9569EC\">^</span><span style=\"color: #CCCCCC\">1[3-9]\\d</span><span style=\"color: #9569EC\">&#123;9&#125;$</span><span style=\"color: #505153\">/</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">test</span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">mobile</span><span style=\"color: #505153\">))</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">$toast</span><span style=\"color: #505153\">(</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">请输入正确的手机号</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC; font-style: italic\">false</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">if</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #DA67DA\">!</span><span style=\"color: #505153\">/</span><span style=\"color: #9569EC\">^</span><span style=\"color: #CCCCCC\">\\w</span><span style=\"color: #9569EC\">&#123;4&#125;$</span><span style=\"color: #505153\">/</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">test</span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">picCode</span><span style=\"color: #505153\">))</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">$toast</span><span style=\"color: #505153\">(</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">请输入正确的图形验证码</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC; font-style: italic\">false</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC; font-style: italic\">true</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span></span></code></pre></div><ol start=\"3\">\n<li>请求倒计时前进行校验</li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #CCCCCC\">async </span><span style=\"color: #9569EC\">getCode</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">()</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">if</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #DA67DA\">!</span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">validFn</span><span style=\"color: #505153\">())</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">return</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">...</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span></span></code></pre></div><p>(3) 封装接口，请求获取验证码</p>\n<ol>\n<li>封装接口 <code>api/login.js</code></li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #9569EC\">export</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">const</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">getMsgCode</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">captchaCode</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">captchaKey</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">mobile</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">=&gt;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">request</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">post</span><span style=\"color: #505153\">(</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">/captcha/sendSmsCaptcha</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    form</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      captchaCode</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      captchaKey</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      mobile</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span></span></code></pre></div><ol start=\"2\">\n<li>调用接口，添加提示</li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #CCCCCC\">async </span><span style=\"color: #9569EC\">getCode</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">()</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">if</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #DA67DA\">!</span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">validFn</span><span style=\"color: #505153\">())</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">return</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">if</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #DA67DA\">!</span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">timer </span><span style=\"color: #DA67DA\">&amp;&amp;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">second </span><span style=\"color: #9569EC\">===</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">totalSecond</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #65666B; font-style: italic\">// 发送请求，获取验证码</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">await</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">getMsgCode</span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">picCode</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">picKey</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">mobile</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">$toast</span><span style=\"color: #505153\">(</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">发送成功，请注意查收</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #65666B; font-style: italic\">// 开启倒计时</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">timer </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">setInterval</span><span style=\"color: #505153\">(()</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">=&gt;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">second</span><span style=\"color: #9569EC\">--</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      </span><span style=\"color: #9569EC\">if</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">second </span><span style=\"color: #9569EC\">&lt;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">1</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">        </span><span style=\"color: #9569EC\">clearInterval</span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">timer</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">        </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">timer </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC; font-style: italic\">null</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">        </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">second </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">totalSecond</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #505153\">&#125;</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">1000</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">&#125;</span></span></code></pre></div><h2 id=\"三、封装api接口-登录功能\"><a href=\"#三、封装api接口-登录功能\" class=\"headerlink\" title=\"三、封装api接口 - 登录功能\"></a>三、封装api接口 - 登录功能</h2><p><code>api/login.js</code> 提供登录 Api 函数</p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #65666B; font-style: italic\">// 验证码登录</span></span>\n<span class=\"line\"><span style=\"color: #9569EC\">export</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">const</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">codeLogin</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">mobile</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">smsCode</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">=&gt;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">request</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">post</span><span style=\"color: #505153\">(</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">/passport/login</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    form</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      isParty</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC; font-style: italic\">false</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      mobile</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      partyData</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;&#125;</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      smsCode</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span></span></code></pre></div><p><code>login/index.vue</code> 登录功能</p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DA67DA\">&lt;</span><span style=\"color: #9569EC; font-style: italic\">input</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">class</span><span style=\"color: #9569EC\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">inp</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">v-model</span><span style=\"color: #9569EC\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">msgCode</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">maxlength</span><span style=\"color: #9569EC\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">6</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">placeholder</span><span style=\"color: #9569EC\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">请输入短信验证码</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">type</span><span style=\"color: #9569EC\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">text</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #DA67DA\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #DA67DA\">&lt;</span><span style=\"color: #9569EC; font-style: italic\">div</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">class</span><span style=\"color: #9569EC\">=</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\">login-btn</span><span style=\"color: #505153\">&quot;</span><span style=\"color: #CCCCCC\"> @click=&quot;login&quot;&gt;登录&lt;/div&gt;</span></span>\n<span class=\"line\"><span style=\"color: #61D0FF\">data</span><span style=\"color: #CCCCCC\"> () </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  return </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    msgCode</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;&#39;</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span><span style=\"color: #CCCCCC\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">methods: </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  async </span><span style=\"color: #9569EC\">login</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">()</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">if</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">!this.validFn(</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\">) </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      </span><span style=\"color: #9569EC\">return</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">if</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">!/^\\</span><span style=\"color: #61D0FF\">d</span><span style=\"color: #505153\">&#123;</span><span style=\"color: #CCCCCC\">6</span><span style=\"color: #505153\">&#125;</span><span style=\"color: #61D0FF\">$</span><span style=\"color: #CCCCCC\">/.test(this.msgCode</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\">) </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">$toast</span><span style=\"color: #505153\">(</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">请输入正确的手机验证码</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      </span><span style=\"color: #9569EC\">return</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    await </span><span style=\"color: #9569EC\">codeLogin</span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">this.mobile</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> this.msgCode</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    this.$router.</span><span style=\"color: #9569EC\">push</span><span style=\"color: #505153\">(</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">/</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    this.</span><span style=\"color: #9569EC\">$toast</span><span style=\"color: #505153\">(</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">登录成功</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span></span></code></pre></div><h2 id=\"四、响应拦截器统一处理错误提示\"><a href=\"#四、响应拦截器统一处理错误提示\" class=\"headerlink\" title=\"四、响应拦截器统一处理错误提示\"></a>四、响应拦截器统一处理错误提示</h2><p>响应拦截器是咱们拿到数据的 <strong>第一个</strong> “数据流转站”，可以在里面统一处理错误，只要不是 200 默认给提示，抛出错误</p>\n<p><code>utils/request.js</code></p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #9569EC\">import</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span><span style=\"color: #CCCCCC\"> Toast </span><span style=\"color: #505153\">&#125;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">from</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;</span><span style=\"color: #DA67DA\">vant</span><span style=\"color: #505153\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #9569EC\">...</span></span>\n<span class=\"line\"><span style=\"color: #65666B; font-style: italic\">// 添加响应拦截器</span></span>\n<span class=\"line\"><span style=\"color: #61D0FF\">request</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #61D0FF\">interceptors</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #61D0FF\">response</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">use</span><span style=\"color: #505153\">(</span><span style=\"color: #DA67DA\">function</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">response</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #DA67DA\">const</span><span style=\"color: #CCCCCC\"> res </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">response</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">data</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">if</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">res</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">status </span><span style=\"color: #9569EC\">!==</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">200</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">Toast</span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">res</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">message</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC; font-style: italic\">Promise</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">reject</span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">res</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">message</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #65666B; font-style: italic\">// 对响应数据做点什么</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> res</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">function</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">error</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #65666B; font-style: italic\">// 对响应错误做点什么</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC; font-style: italic\">Promise</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">reject</span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">error</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;)</span></span></code></pre></div><h2 id=\"五、将登录权证信息存入-vuex\"><a href=\"#五、将登录权证信息存入-vuex\" class=\"headerlink\" title=\"五、将登录权证信息存入 vuex\"></a>五、将登录权证信息存入 vuex</h2><ol>\n<li>新建 vuex user 模块 store&#x2F;modules&#x2F;user.js</li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #9569EC\">export</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">default</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  namespaced</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF; font-style: italic\">true</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">state</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">()</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      userInfo</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">        token</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;&#39;</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">        userId</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;&#39;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      </span><span style=\"color: #505153\">&#125;</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  mutations</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;&#125;</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  actions</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span></span></code></pre></div><ol start=\"2\">\n<li>挂载到 vuex 上</li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #9569EC\">import</span><span style=\"color: #CCCCCC\"> Vue </span><span style=\"color: #9569EC\">from</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;</span><span style=\"color: #DA67DA\">vue</span><span style=\"color: #505153\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #9569EC\">import</span><span style=\"color: #CCCCCC\"> Vuex </span><span style=\"color: #9569EC\">from</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;</span><span style=\"color: #DA67DA\">vuex</span><span style=\"color: #505153\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #9569EC\">import</span><span style=\"color: #CCCCCC\"> user </span><span style=\"color: #9569EC\">from</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;</span><span style=\"color: #DA67DA\">./modules/user</span><span style=\"color: #505153\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #61D0FF\">Vue</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">use</span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">Vuex</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #9569EC\">export</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">default</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">new</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">Vuex</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">Store</span><span style=\"color: #505153\">(&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  modules</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    user</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;)</span></span></code></pre></div><ol start=\"3\">\n<li>提供 mutations</li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #CCCCCC\">mutations</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">setUserInfo</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">state</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> obj</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #61D0FF\">state</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">userInfo </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> obj</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span><span style=\"color: #DA67DA\">,</span></span></code></pre></div><ol start=\"4\">\n<li>页面中 commit 调用</li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #65666B; font-style: italic\">// 登录按钮（校验 &amp; 提交）</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">async </span><span style=\"color: #9569EC\">login</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">()</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">if</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #DA67DA\">!</span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">validFn</span><span style=\"color: #505153\">())</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">return</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">...</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #DA67DA\">const</span><span style=\"color: #CCCCCC\"> res </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">await</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">codeLogin</span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">mobile</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">msgCode</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #61D0FF\">$store</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">commit</span><span style=\"color: #505153\">(</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">user/setUserInfo</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">res</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">data</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #61D0FF\">$router</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">push</span><span style=\"color: #505153\">(</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">/</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #61D0FF; font-style: italic\">this</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">$toast</span><span style=\"color: #505153\">(</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">登录成功</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span></span></code></pre></div><h2 id=\"六、vuex-持久化处理\"><a href=\"#六、vuex-持久化处理\" class=\"headerlink\" title=\"六、vuex 持久化处理\"></a>六、vuex 持久化处理</h2><ol>\n<li>新建 <code>utils/storage.js</code> 封装方法</li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DA67DA\">const</span><span style=\"color: #CCCCCC\"> INFO_KEY </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">hm_shopping_info</span><span style=\"color: #505153\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #65666B; font-style: italic\">// 获取个人信息</span></span>\n<span class=\"line\"><span style=\"color: #9569EC\">export</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">const</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">getInfo</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">()</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">=&gt;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #DA67DA\">const</span><span style=\"color: #CCCCCC\"> result </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">localStorage</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">getItem</span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">INFO_KEY</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> result </span><span style=\"color: #DA67DA\">?</span><span style=\"color: #CCCCCC\"> JSON</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">parse</span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">result</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    token</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;&#39;</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    userId</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;&#39;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #65666B; font-style: italic\">// 设置个人信息</span></span>\n<span class=\"line\"><span style=\"color: #9569EC\">export</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">const</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">setInfo</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">info</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">=&gt;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #61D0FF\">localStorage</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">setItem</span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">INFO_KEY</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> JSON</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">stringify</span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">info</span><span style=\"color: #505153\">))</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #65666B; font-style: italic\">// 移除个人信息</span></span>\n<span class=\"line\"><span style=\"color: #9569EC\">export</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">const</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">removeInfo</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">()</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">=&gt;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #61D0FF\">localStorage</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">removeItem</span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">INFO_KEY</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span></span></code></pre></div><ol start=\"2\">\n<li>vuex user 模块持久化处理</li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #9569EC\">import</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span><span style=\"color: #CCCCCC\"> getInfo</span><span style=\"color: #61D0FF\">,</span><span style=\"color: #CCCCCC\"> setInfo </span><span style=\"color: #505153\">&#125;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">from</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;</span><span style=\"color: #DA67DA\">@/utils/storage</span><span style=\"color: #505153\">&#39;</span></span>\n<span class=\"line\"><span style=\"color: #9569EC\">export</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">default</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  namespaced</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF; font-style: italic\">true</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">state</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">()</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      userInfo</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">getInfo</span><span style=\"color: #505153\">()</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  mutations</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">setUserInfo</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">state</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">obj</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      </span><span style=\"color: #61D0FF\">state</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">userInfo </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> obj</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">      </span><span style=\"color: #9569EC\">setInfo</span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">obj</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  actions</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span></span></code></pre></div><h2 id=\"七、优化：添加请求-loading-效果\"><a href=\"#七、优化：添加请求-loading-效果\" class=\"headerlink\" title=\"七、优化：添加请求 loading 效果\"></a>七、优化：添加请求 loading 效果</h2><ol>\n<li>请求时，打开 loading</li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #65666B; font-style: italic\">// 添加请求拦截器</span></span>\n<span class=\"line\"><span style=\"color: #61D0FF\">request</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #61D0FF\">interceptors</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #61D0FF\">request</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">use</span><span style=\"color: #505153\">(</span><span style=\"color: #DA67DA\">function</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">config</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #65666B; font-style: italic\">// 在发送请求之前做些什么</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #61D0FF\">Toast</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">loading</span><span style=\"color: #505153\">(&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    message</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">请求中...</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    forbidClick</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC; font-style: italic\">true</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    loadingType</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">spinner</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #DA67DA\">,</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    duration</span><span style=\"color: #DA67DA\">:</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">0</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> config</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">function</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">error</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #65666B; font-style: italic\">// 对请求错误做些什么</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC; font-style: italic\">Promise</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">reject</span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">error</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;)</span></span></code></pre></div><ol start=\"2\">\n<li>响应时，关闭 loading</li>\n</ol>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #65666B; font-style: italic\">// 添加响应拦截器</span></span>\n<span class=\"line\"><span style=\"color: #61D0FF\">request</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #61D0FF\">interceptors</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #61D0FF\">response</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">use</span><span style=\"color: #505153\">(</span><span style=\"color: #DA67DA\">function</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">response</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #DA67DA\">const</span><span style=\"color: #CCCCCC\"> res </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">response</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">data</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">if</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">res</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">status </span><span style=\"color: #9569EC\">!==</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">200</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">Toast</span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">res</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">message</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC; font-style: italic\">Promise</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">reject</span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">res</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">message</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">else</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #65666B; font-style: italic\">// 清除 loading 中的效果</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #61D0FF\">Toast</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">clear</span><span style=\"color: #505153\">()</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #65666B; font-style: italic\">// 对响应数据做点什么</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> res</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">function</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">error</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #65666B; font-style: italic\">// 对响应错误做点什么</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">return</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC; font-style: italic\">Promise</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">reject</span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">error</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;)</span></span></code></pre></div><h2 id=\"八、登录访问拦截-路由前置守卫\"><a href=\"#八、登录访问拦截-路由前置守卫\" class=\"headerlink\" title=\"八、登录访问拦截 - 路由前置守卫\"></a>八、登录访问拦截 - 路由前置守卫</h2><p><strong>目标：基于全局前置守卫，进行页面访问拦截处理</strong></p>\n<p>说明：智慧商城项目，大部分页面，游客都可以直接访问, 如遇到需要登录才能进行的操作，提示并跳转到登录</p>\n<p>但是：对于支付页，订单页等，必须是登录的用户才能访问的，游客不能进入该页面，需要做拦截处理</p>\n<p><img src=\"https://pic.imgdb.cn/item/65caf62d9f345e8d03fa6f85.jpg\"></p>\n<p>路由导航守卫 - <a href=\"https://gitee.com/link?target=https://v3.router.vuejs.org/zh/guide/advanced/navigation-guards.html\">全局前置守卫</a></p>\n<p>1.所有的路由一旦被匹配到，都会先经过全局前置守卫</p>\n<p>2.只有全局前置守卫放行，才会真正解析渲染组件，才能看到页面内容</p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #61D0FF\">router</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">beforeEach</span><span style=\"color: #505153\">((</span><span style=\"color: #61D0FF\">to</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">from</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">next</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">=&gt;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #65666B; font-style: italic\">// 1. to   往哪里去， 到哪去的路由信息对象  </span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #65666B; font-style: italic\">// 2. from 从哪里来， 从哪来的路由信息对象</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #65666B; font-style: italic\">// 3. next() 是否放行</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #65666B; font-style: italic\">//    如果next()调用，就是放行</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #65666B; font-style: italic\">//    next(路径) 拦截到某个路径页面</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;)</span></span></code></pre></div><p><img src=\"https://pic.imgdb.cn/item/65caf6719f345e8d03fb263f.jpg\"></p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki Aurora Future\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #DA67DA\">const</span><span style=\"color: #CCCCCC\"> authUrl </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">[</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">/pay</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">/myorder</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #505153\">]</span></span>\n<span class=\"line\"><span style=\"color: #61D0FF\">router</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">beforeEach</span><span style=\"color: #505153\">((</span><span style=\"color: #61D0FF\">to</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">from</span><span style=\"color: #DA67DA\">,</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">next</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #DA67DA\">=&gt;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #DA67DA\">const</span><span style=\"color: #CCCCCC\"> token </span><span style=\"color: #9569EC\">=</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #61D0FF\">store</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #61D0FF\">getters</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">token</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">if</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #DA67DA\">!</span><span style=\"color: #61D0FF\">authUrl</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #9569EC\">includes</span><span style=\"color: #505153\">(</span><span style=\"color: #61D0FF\">to</span><span style=\"color: #DA67DA\">.</span><span style=\"color: #CCCCCC\">path</span><span style=\"color: #505153\">))</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">next</span><span style=\"color: #505153\">()</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">return</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #9569EC\">if</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">(</span><span style=\"color: #CCCCCC\">token</span><span style=\"color: #505153\">)</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">next</span><span style=\"color: #505153\">()</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #9569EC\">else</span><span style=\"color: #CCCCCC\"> </span><span style=\"color: #505153\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">    </span><span style=\"color: #9569EC\">next</span><span style=\"color: #505153\">(</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #CCCCCC\">/login</span><span style=\"color: #505153\">&#39;</span><span style=\"color: #505153\">)</span></span>\n<span class=\"line\"><span style=\"color: #CCCCCC\">  </span><span style=\"color: #505153\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #505153\">&#125;)</span></span></code></pre></div><h2 id=\"结语\"><a href=\"#结语\" class=\"headerlink\" title=\"结语\"></a>结语</h2><p>学如逆水行舟，不进则退</p>\n<p><code>2023</code> <code>10</code> <code>03</code></p>\n","text":"一、Toast 轻提示使用组件 两种使用方式 导入调用 ( 组件内 或 非组件中均可 ) javascriptimport &#123; Toast &#125...","permalink":"/post/项目复盘报告【三】","photos":[],"count_time":{"symbolsCount":"7.6k","symbolsTime":"7 mins."},"categories":[{"name":"智慧商城项目","slug":"智慧商城项目","count":7,"path":"api/categories/智慧商城项目.json"}],"tags":[{"name":"项目","slug":"项目","count":8,"path":"api/tags/项目.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81Toast-%E8%BD%BB%E6%8F%90%E7%A4%BA\"><span class=\"toc-text\">一、Toast 轻提示</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81%E7%9F%AD%E4%BF%A1%E5%80%92%E8%AE%A1%E6%97%B6%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">二、短信倒计时功能</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81%E5%B0%81%E8%A3%85api%E6%8E%A5%E5%8F%A3-%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">三、封装api接口 - 登录功能</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E3%80%81%E5%93%8D%E5%BA%94%E6%8B%A6%E6%88%AA%E5%99%A8%E7%BB%9F%E4%B8%80%E5%A4%84%E7%90%86%E9%94%99%E8%AF%AF%E6%8F%90%E7%A4%BA\"><span class=\"toc-text\">四、响应拦截器统一处理错误提示</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%94%E3%80%81%E5%B0%86%E7%99%BB%E5%BD%95%E6%9D%83%E8%AF%81%E4%BF%A1%E6%81%AF%E5%AD%98%E5%85%A5-vuex\"><span class=\"toc-text\">五、将登录权证信息存入 vuex</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%AD%E3%80%81vuex-%E6%8C%81%E4%B9%85%E5%8C%96%E5%A4%84%E7%90%86\"><span class=\"toc-text\">六、vuex 持久化处理</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%83%E3%80%81%E4%BC%98%E5%8C%96%EF%BC%9A%E6%B7%BB%E5%8A%A0%E8%AF%B7%E6%B1%82-loading-%E6%95%88%E6%9E%9C\"><span class=\"toc-text\">七、优化：添加请求 loading 效果</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%AB%E3%80%81%E7%99%BB%E5%BD%95%E8%AE%BF%E9%97%AE%E6%8B%A6%E6%88%AA-%E8%B7%AF%E7%94%B1%E5%89%8D%E7%BD%AE%E5%AE%88%E5%8D%AB\"><span class=\"toc-text\">八、登录访问拦截 - 路由前置守卫</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%BB%93%E8%AF%AD\"><span class=\"toc-text\">结语</span></a></li></ol>","author":{"name":"一小池勺","slug":"blog-author","avatar":"https://pic.imgdb.cn/item/65c339bd9f345e8d03bb301d.jpg","link":"/","description":"不要感受路，要赶路","socials":{"github":"https://gitee.com/zrblue","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3318213455","zhihu":"","csdn":"https://blog.csdn.net/zrblue?type=blog","juejin":"https://juejin.cn","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"项目复盘报告【四】","uid":"e122b9468970f0d7c886e2ca647dcd93","slug":"项目复盘报告【四】","date":"2023-10-04T09:23:56.000Z","updated":"2024-02-13T09:33:35.023Z","comments":true,"path":"api/articles/项目复盘报告【四】.json","keywords":null,"cover":"https://pic.imgdb.cn/item/65cb36a29f345e8d03b81368.jpg","text":"一、首页 - 静态结构准备 静态结构和样式 layout/home.vue html&lt;template&gt; &lt;div class=&quot;h...","permalink":"/post/项目复盘报告【四】","photos":[],"count_time":{"symbolsCount":"19k","symbolsTime":"17 mins."},"categories":[{"name":"智慧商城项目","slug":"智慧商城项目","count":7,"path":"api/categories/智慧商城项目.json"}],"tags":[{"name":"项目","slug":"项目","count":8,"path":"api/tags/项目.json"}],"author":{"name":"一小池勺","slug":"blog-author","avatar":"https://pic.imgdb.cn/item/65c339bd9f345e8d03bb301d.jpg","link":"/","description":"不要感受路，要赶路","socials":{"github":"https://gitee.com/zrblue","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3318213455","zhihu":"","csdn":"https://blog.csdn.net/zrblue?type=blog","juejin":"https://juejin.cn","customs":{}}}},"next_post":{"title":"项目复盘报告【二】","uid":"c9c880b5a5547e09fadebe0f84b91ba0","slug":"项目复盘报告【二】","date":"2023-10-02T09:23:42.000Z","updated":"2024-02-13T09:31:15.102Z","comments":true,"path":"api/articles/项目复盘报告【二】.json","keywords":null,"cover":"https://pic.imgdb.cn/item/65cb36a29f345e8d03b81368.jpg","text":"一、路由配置 - 一级路由但凡是单个页面，独立展示的，都是一级路由 路由设计： 登录页 首页架子 首页 - 二级 分类页 - 二级 购物车 - 二级 我的 - ...","permalink":"/post/项目复盘报告【二】","photos":[],"count_time":{"symbolsCount":"8.8k","symbolsTime":"8 mins."},"categories":[{"name":"智慧商城项目","slug":"智慧商城项目","count":7,"path":"api/categories/智慧商城项目.json"}],"tags":[{"name":"项目","slug":"项目","count":8,"path":"api/tags/项目.json"}],"author":{"name":"一小池勺","slug":"blog-author","avatar":"https://pic.imgdb.cn/item/65c339bd9f345e8d03bb301d.jpg","link":"/","description":"不要感受路，要赶路","socials":{"github":"https://gitee.com/zrblue","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3318213455","zhihu":"","csdn":"https://blog.csdn.net/zrblue?type=blog","juejin":"https://juejin.cn","customs":{}}}}}